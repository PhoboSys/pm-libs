{"version":3,"file":"index.js","names":["_logger","_interopRequireDefault","require","_factory","_excluded","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_objectWithoutProperties","i","_objectWithoutPropertiesLoose","s","includes","propertyIsEnumerable","call","n","hasOwnProperty","_classCallCheck","a","TypeError","_defineProperties","key","_createClass","_toPrimitive","toPrimitive","String","Number","Persistence","exports","init","config","logger","info","storages","totalState","storageName","globalConfig","storageCfg","cfg","Factory","create","storageCleanUp","state","get","instance"],"sources":["../../libs/persistence-js/index.js"],"sourcesContent":["import logger from '../logger'\n\nimport Factory from './factory'\n\nexport default class Persistence {\n  static init(config) {\n    logger.info('Starting initialization')\n\n    if (config.storages) {\n      let totalState = {}\n\n      for (const storageName in config.storages) {\n        // eslint-disable-next-line\n        const { storages, ...globalConfig } = config\n        const storageCfg = { ...config.storages[storageName], storageName: storageName }\n        const cfg = { ...globalConfig, ...storageCfg }\n\n        if (!Persistence[storageName]) Persistence[storageName] = Factory.create(cfg)\n\n        Persistence[storageName].storageCleanUp()\n\n        const state = Persistence[storageName].get()\n        totalState = { ...totalState, ...state }\n      }\n\n      return totalState\n    } else {\n      const cfg = { ...config, storageName: 'instance' }\n      if (!Persistence.instance) Persistence.instance = Factory.create(cfg)\n\n      Persistence.instance.storageCleanUp()\n\n      return Persistence.instance.get()\n    }\n  }\n}\n\n"],"mappings":"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","ignoreList":[]}