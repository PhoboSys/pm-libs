{"version":3,"file":"index.js","names":["_lodash","require","_big","_interopRequireDefault","_config","_calcUtils","_currency","e","__esModule","htmlPercentSigned","percent","precision","arguments","length","undefined","config","maximum_fraction_digits_precent","percentStr","htmlPercent","floor","mul","htmlCurrentySymboled","amount","quote","isNaN","CurrencyFormatter","formatSymboled","minimumFractionDigits","maximumFractionDigits","htmlCurrencyNamed","formatNamed","htmlCurrency","maximum_fraction_digits","HTML_LOWEST_AMOUNT","Math","pow","eq","lt","Big","abs","toString","gt","concat","formatDefault","htmlAddress","address","toLower","replace","htmlCounter","counter","options","output","Number","max","htmlAddressHref","isEmpty","join","blockchain_explorer","htmlTransactionHref","hash","htmlAmount","number","usformatter","Intl","NumberFormat","notation","compactDisplay","format","htmlTransaction","htmlPricefeedRoundid","roundid"],"sources":["../../libs/html-utils/index.js"],"sourcesContent":["import { floor, join, isEmpty, toLower } from 'lodash'\nimport Big from 'big.js'\n\nimport config from '@config'\n\nimport { eq, gt, lt, mul } from '../calc-utils'\nimport { CurrencyFormatter } from './currency'\n\nexport function htmlPercentSigned(percent, precision = config.maximum_fraction_digits_precent) {\n  let percentStr = htmlPercent(percent, precision)\n  if (percent > 0) percentStr = '+' + percentStr\n  return percentStr\n}\n\nexport function htmlPercent(percent, precision = config.maximum_fraction_digits_precent) {\n  return (floor(mul(percent, 100), precision) || 0) + '%'\n}\n\nexport function htmlCurrentySymboled(amount, quote) {\n  if (isNaN(+amount)) return ''\n\n  return CurrencyFormatter.formatSymboled(amount, quote, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 8,\n  })\n}\n\nexport function htmlCurrencyNamed(amount, quote) {\n  if (isNaN(+amount)) return ''\n\n  return CurrencyFormatter.formatNamed(amount, quote, {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 8,\n  })\n}\n\nexport function htmlCurrency(amount, maximumFractionDigits = config.maximum_fraction_digits) {\n  if (isNaN(+amount)) return ''\n\n  const HTML_LOWEST_AMOUNT = Math.pow(10, -(maximumFractionDigits))\n\n  if (!eq(amount, 0) && lt(Big(amount).abs().toString(), HTML_LOWEST_AMOUNT)) {\n    if (gt(amount, 0)) return `<${HTML_LOWEST_AMOUNT}`\n    else return `<-${HTML_LOWEST_AMOUNT}`\n  }\n\n  return CurrencyFormatter.formatDefault(amount, {\n    minimumFractionDigits: 0,\n    maximumFractionDigits,\n  })\n}\n\nexport function htmlAddress(address) {\n  return toLower(address?.replace(/(0x.{3}).*(.{5})$/, '$1...$2'))\n}\n\nexport function htmlCounter(counter, options) {\n  let output = counter\n\n  if (Number(counter) > Number(options?.max)) output = options.max + '+'\n\n  return output\n}\n\nexport function htmlAddressHref(address) {\n  if (isEmpty(address)) return '#'\n\n  return join([config.blockchain_explorer, 'address', address], '/')\n}\n\nexport function htmlTransactionHref(hash) {\n  if (isEmpty(hash)) return '#'\n\n  return join([config.blockchain_explorer, 'tx', hash], '/')\n}\n\nexport function htmlAmount(number) {\n  const usformatter = Intl.NumberFormat('en-US', { notation: 'compact', compactDisplay: 'short' })\n  return usformatter.format(number)\n}\n\nexport function htmlTransaction(hash) {\n  return toLower(hash?.replace(/(0x.{3}).*(.{5})$/, '$1...$2'))\n}\n\nexport function htmlPricefeedRoundid(roundid) {\n  return toLower(roundid?.replace(/^(.{5}).*(.{5})$/, '$1...$2'))\n}\n"],"mappings":"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","ignoreList":[]}