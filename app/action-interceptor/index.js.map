{"version":3,"file":"index.js","names":["_lodash","require","_logger","_interopRequireDefault","e","__esModule","interceptorMiddleware","interceptors","store","next","action","name","interceptor","isFunction","detect","intercept","detected","logger","info","type","metadata","stopPropagation"],"sources":["../../libs/action-interceptor/index.js"],"sourcesContent":["import { isFunction } from 'lodash'\n\nimport logger from '@libs/logger'\n\nexport function interceptorMiddleware(interceptors) {\n  return store => next => action => {\n\n    for (const name in interceptors) {\n      const interceptor = interceptors[name]\n\n      if (!isFunction(interceptor.detect)) continue\n      if (!isFunction(interceptor.intercept)) continue\n\n      const detected = interceptor.detect(action, store)\n      if (!detected) continue\n\n      logger.info('Action \"%s\" was detected by \"%s\", intercepting!', action.type, name)\n\n      interceptor.intercept(action, store)\n    }\n\n    if (!action.metadata.stopPropagation) return next(action)\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAiC,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE1B,SAASE,qBAAqBA,CAACC,YAAY,EAAE;EAClD,OAAO,UAAAC,KAAK;IAAA,OAAI,UAAAC,IAAI;MAAA,OAAI,UAAAC,MAAM,EAAI;QAEhC,KAAK,IAAMC,IAAI,IAAIJ,YAAY,EAAE;UAC/B,IAAMK,WAAW,GAAGL,YAAY,CAACI,IAAI,CAAC;UAEtC,IAAI,CAAC,IAAAE,kBAAU,EAACD,WAAW,CAACE,MAAM,CAAC,EAAE;UACrC,IAAI,CAAC,IAAAD,kBAAU,EAACD,WAAW,CAACG,SAAS,CAAC,EAAE;UAExC,IAAMC,QAAQ,GAAGJ,WAAW,CAACE,MAAM,CAACJ,MAAM,EAAEF,KAAK,CAAC;UAClD,IAAI,CAACQ,QAAQ,EAAE;UAEfC,kBAAM,CAACC,IAAI,CAAC,iDAAiD,EAAER,MAAM,CAACS,IAAI,EAAER,IAAI,CAAC;UAEjFC,WAAW,CAACG,SAAS,CAACL,MAAM,EAAEF,KAAK,CAAC;QACtC;QAEA,IAAI,CAACE,MAAM,CAACU,QAAQ,CAACC,eAAe,EAAE,OAAOZ,IAAI,CAACC,MAAM,CAAC;MAC3D,CAAC;IAAA;EAAA;AACH","ignoreList":[]}